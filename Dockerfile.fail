FROM gradle:jdk18
ENV GRADLE_HOME=/opt/gradle \
    GRADLE_VERSION=7.5.1 \
    JAVA_HOME=/opt/java/openjdk \
    JAVA_VERSION=jdk-17.0.4.1+1 \
    TERM=xterm \
    HOSTNAME=ci-pipeline-8zog4n-backend-build-pod \
    HOME=/root
ENV ASF_ABC_PORT=tcp://168.42.116.239:7777 \
    ASF_ABC_PORT_7777_TCP=tcp://168.42.116.239:7777 \
    ASF_ABC_PORT_7777_TCP_ADDR=168.42.116.239 \
    ASF_ABC_PORT_7777_TCP_PORT=7777 \
    ASF_ABC_PORT_7777_TCP_PROTO=tcp \
    ASF_ABC_SERVICE_HOST=168.42.116.239 \
    ASF_ABC_SERVICE_PORT=7777 \
    ASF_ABC_SERVICE_PORT_7777_TCP=7777 \
    ASF_LOGSTASH_PORT=tcp://168.42.218.162:5044 \
    ASF_LOGSTASH_PORT_5044_TCP=tcp://168.42.218.162:5044 \
    ASF_LOGSTASH_PORT_5044_TCP_ADDR=168.42.218.162 \
    ASF_LOGSTASH_PORT_5044_TCP_PORT=5044 \
    ASF_LOGSTASH_PORT_5044_TCP_PROTO=tcp \
    ASF_LOGSTASH_SERVICE_HOST=168.42.218.162 \
    ASF_LOGSTASH_SERVICE_PORT=5044 \
    SOME_BACKEND_PORT=tcp://168.42.132.2:8080 \
    SOME_BACKEND_PORT_8080_TCP=tcp://168.42.132.2:8080 \
    SOME_BACKEND_PORT_8080_TCP_ADDR=168.42.132.2 \
    SOME_BACKEND_PORT_8080_TCP_PORT=8080 \
    SOME_BACKEND_PORT_8080_TCP_PROTO=tcp \
    SOME_BACKEND_SERVICE_HOST=168.42.132.2 \
    SOME_BACKEND_SERVICE_PORT=8080 \
    SOME_BACKEND_SERVICE_PORT_HTTP=8080 \
    SOME_WEB_PORT=tcp://168.42.157.73:80 \
    SOME_WEB_PORT_80_TCP=tcp://168.42.157.73:80 \
    SOME_WEB_PORT_80_TCP_ADDR=168.42.157.73 \
    SOME_WEB_PORT_80_TCP_PORT=80 \
    SOME_WEB_PORT_80_TCP_PROTO=tcp \
    SOME_WEB_SERVICE_HOST=168.42.157.73 \
    SOME_WEB_SERVICE_PORT=80 \
    SOME_WEB_SERVICE_PORT_HTTP=80 \
    EL_SOME_PULL_REQUEST_MERGED_PORT=tcp://168.42.112.70:8080 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_8080_TCP=tcp://168.42.112.70:8080 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_8080_TCP_ADDR=168.42.112.70 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_8080_TCP_PORT=8080 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_8080_TCP_PROTO=tcp \
    EL_SOME_PULL_REQUEST_MERGED_PORT_9000_TCP=tcp://168.42.112.70:9000 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_9000_TCP_ADDR=168.42.112.70 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_9000_TCP_PORT=9000 \
    EL_SOME_PULL_REQUEST_MERGED_PORT_9000_TCP_PROTO=tcp \
    EL_SOME_PULL_REQUEST_MERGED_SERVICE_HOST=168.42.112.70 \
    EL_SOME_PULL_REQUEST_MERGED_SERVICE_PORT=8080 \
    EL_SOME_PULL_REQUEST_MERGED_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_SOME_PULL_REQUEST_MERGED_SERVICE_PORT_HTTP_METRICS=9000 \
    EL_SOME_PULL_REQUEST_PORT=tcp://168.42.201.105:8080 \
    EL_SOME_PULL_REQUEST_PORT_8080_TCP=tcp://168.42.201.105:8080 \
    EL_SOME_PULL_REQUEST_PORT_8080_TCP_ADDR=168.42.201.105 \
    EL_SOME_PULL_REQUEST_PORT_8080_TCP_PORT=8080 \
    EL_SOME_PULL_REQUEST_PORT_8080_TCP_PROTO=tcp \
    EL_SOME_PULL_REQUEST_PORT_9000_TCP=tcp://168.42.201.105:9000 \
    EL_SOME_PULL_REQUEST_PORT_9000_TCP_ADDR=168.42.201.105 \
    EL_SOME_PULL_REQUEST_PORT_9000_TCP_PORT=9000 \
    EL_SOME_PULL_REQUEST_PORT_9000_TCP_PROTO=tcp \
    EL_SOME_PULL_REQUEST_SERVICE_HOST=168.42.201.105 \
    EL_SOME_PULL_REQUEST_SERVICE_PORT=8080 \
    EL_SOME_PULL_REQUEST_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_SOME_PULL_REQUEST_SERVICE_PORT_HTTP_METRICS=9000 \
    EL_SOME_PUSH_PORT=tcp://168.42.45.197:8080 \
    EL_SOME_PUSH_PORT_8080_TCP=tcp://168.42.45.197:8080 \
    EL_SOME_PUSH_PORT_8080_TCP_ADDR=168.42.45.197 \
    EL_SOME_PUSH_PORT_8080_TCP_PORT=8080 \
    EL_SOME_PUSH_PORT_8080_TCP_PROTO=tcp \
    EL_SOME_PUSH_PORT_9000_TCP=tcp://168.42.45.197:9000 \
    EL_SOME_PUSH_PORT_9000_TCP_ADDR=168.42.45.197 \
    EL_SOME_PUSH_PORT_9000_TCP_PORT=9000 \
    EL_SOME_PUSH_PORT_9000_TCP_PROTO=tcp \
    EL_SOME_PUSH_SERVICE_HOST=168.42.45.197 \
    EL_SOME_PUSH_SERVICE_PORT=8080 \
    EL_SOME_PUSH_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_SOME_PUSH_SERVICE_PORT_HTTP_METRICS=9000 \
    EL_EVENT_LISTENER_CKNY8O_PORT=tcp://168.42.116.227:8080 \
    EL_EVENT_LISTENER_CKNY8O_PORT_8080_TCP=tcp://168.42.116.227:8080 \
    EL_EVENT_LISTENER_CKNY8O_PORT_8080_TCP_ADDR=168.42.116.227 \
    EL_EVENT_LISTENER_CKNY8O_PORT_8080_TCP_PORT=8080 \
    EL_EVENT_LISTENER_CKNY8O_PORT_8080_TCP_PROTO=tcp \
    EL_EVENT_LISTENER_CKNY8O_PORT_9000_TCP=tcp://168.42.116.227:9000 \
    EL_EVENT_LISTENER_CKNY8O_PORT_9000_TCP_ADDR=168.42.116.227 \
    EL_EVENT_LISTENER_CKNY8O_PORT_9000_TCP_PORT=9000 \
    EL_EVENT_LISTENER_CKNY8O_PORT_9000_TCP_PROTO=tcp \
    EL_EVENT_LISTENER_CKNY8O_SERVICE_HOST=168.42.116.227 \
    EL_EVENT_LISTENER_CKNY8O_SERVICE_PORT=8080 \
    EL_EVENT_LISTENER_CKNY8O_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_EVENT_LISTENER_CKNY8O_SERVICE_PORT_HTTP_METRICS=9000 \
    EL_EVENT_LISTENER_YWQT73_PORT=tcp://168.42.38.177:8080 \
    EL_EVENT_LISTENER_YWQT73_PORT_8080_TCP=tcp://168.42.38.177:8080 \
    EL_EVENT_LISTENER_YWQT73_PORT_8080_TCP_ADDR=168.42.38.177 \
    EL_EVENT_LISTENER_YWQT73_PORT_8080_TCP_PORT=8080 \
    EL_EVENT_LISTENER_YWQT73_PORT_8080_TCP_PROTO=tcp \
    EL_EVENT_LISTENER_YWQT73_PORT_9000_TCP=tcp://168.42.38.177:9000 \
    EL_EVENT_LISTENER_YWQT73_PORT_9000_TCP_ADDR=168.42.38.177 \
    EL_EVENT_LISTENER_YWQT73_PORT_9000_TCP_PORT=9000 \
    EL_EVENT_LISTENER_YWQT73_PORT_9000_TCP_PROTO=tcp \
    EL_EVENT_LISTENER_YWQT73_SERVICE_HOST=168.42.38.177 \
    EL_EVENT_LISTENER_YWQT73_SERVICE_PORT=8080 \
    EL_EVENT_LISTENER_YWQT73_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_EVENT_LISTENER_YWQT73_SERVICE_PORT_HTTP_METRICS=9000 \
    EL_PULL_REQUEST_MERGED_PORT=tcp://168.42.7.1:8080 \
    EL_PULL_REQUEST_MERGED_PORT_8080_TCP=tcp://168.42.7.1:8080 \
    EL_PULL_REQUEST_MERGED_PORT_8080_TCP_ADDR=168.42.7.1 \
    EL_PULL_REQUEST_MERGED_PORT_8080_TCP_PORT=8080 \
    EL_PULL_REQUEST_MERGED_PORT_8080_TCP_PROTO=tcp \
    EL_PULL_REQUEST_MERGED_PORT_9000_TCP=tcp://168.42.7.1:9000 \
    EL_PULL_REQUEST_MERGED_PORT_9000_TCP_ADDR=168.42.7.1 \
    EL_PULL_REQUEST_MERGED_PORT_9000_TCP_PORT=9000 \
    EL_PULL_REQUEST_MERGED_PORT_9000_TCP_PROTO=tcp \
    EL_PULL_REQUEST_MERGED_SERVICE_HOST=168.42.7.1 \
    EL_PULL_REQUEST_MERGED_SERVICE_PORT=8080 \
    EL_PULL_REQUEST_MERGED_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_PULL_REQUEST_MERGED_SERVICE_PORT_HTTP_METRICS=9000 \
    EL_PULL_REQUEST_UPDATED_PORT_8080_TCP_ADDR=168.42.100.120 \
    EL_PULL_REQUEST_UPDATED_PORT_8080_TCP_PORT=8080 \
    EL_PULL_REQUEST_UPDATED_PORT_8080_TCP_PROTO=tcp \
    EL_PULL_REQUEST_UPDATED_PORT_9000_TCP=tcp://168.42.100.120:9000 \
    EL_PULL_REQUEST_UPDATED_PORT_9000_TCP_ADDR=168.42.100.120 \
    EL_PULL_REQUEST_UPDATED_PORT_9000_TCP_PORT=9000 \
    EL_PULL_REQUEST_UPDATED_PORT=tcp://168.42.100.120:8080 \
    EL_PULL_REQUEST_UPDATED_PORT_8080_TCP=tcp://168.42.100.120:8080 \
    EL_PULL_REQUEST_UPDATED_PORT_9000_TCP_PROTO=tcp \
    EL_PULL_REQUEST_UPDATED_SERVICE_HOST=168.42.100.120 \
    EL_PULL_REQUEST_UPDATED_SERVICE_PORT=8080 \
    EL_PULL_REQUEST_UPDATED_SERVICE_PORT_HTTP_LISTENER=8080 \
    EL_PULL_REQUEST_UPDATED_SERVICE_PORT_HTTP_METRICS=9000 \
    KUBERNETES_PORT=tcp://168.42.0.1:443 \
    KUBERNETES_PORT_443_TCP=tcp://168.42.0.1:443 \
    KUBERNETES_PORT_443_TCP_ADDR=168.42.0.1 \
    KUBERNETES_PORT_443_TCP_PORT=443 \
    KUBERNETES_PORT_443_TCP_PROTO=tcp \
    KUBERNETES_SERVICE_HOST=168.42.0.1 \
    KUBERNETES_SERVICE_PORT=443 \
    KUBERNETES_SERVICE_PORT_HTTPS=443 \
    LANG=en_US.UTF-8 \
    LANGUAGE=en_US:en \
    LC_ALL=en_US.UTF-8 \
    NSS_SDB_USE_CACHE=no \
    PATH=/opt/java/openjdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
    PWD=/workspace/source/backend \
    REDIS_EMISSION_CACHE_PORT=tcp://168.42.79.212:6379 \
    REDIS_EMISSION_CACHE_PORT_6379_TCP=tcp://168.42.79.212:6379 \
    REDIS_EMISSION_CACHE_PORT_6379_TCP_ADDR=168.42.79.212 \
    REDIS_EMISSION_CACHE_PORT_6379_TCP_PORT=6379 \
    REDIS_EMISSION_CACHE_PORT_6379_TCP_PROTO=tcp \
    REDIS_EMISSION_CACHE_SERVICE_HOST=168.42.79.212 \
    REDIS_EMISSION_CACHE_SERVICE_PORT=6379 \
    REDIS_EMISSION_CACHE_SERVICE_PORT_REDIS=6379 \
    SSL_CERT_DIR=/tekton-custom-certs:/etc/ssl/certs:/etc/pki/tls/certs:/system/etc/security/cacerts
COPY ./demo /demo
WORKDIR /demo
RUN gradle --no-daemon --info clean assemble 
